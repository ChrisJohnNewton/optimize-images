async function*activate(urls){for(const url of urls)try{const response=await fetch(url);response.ok?204!==response.status&&"0"!==response.headers.get("Content-Length")&&response.body?yield response:console.warn(`skipping empty response for ${url}`):console.warn(`skipping ${response.status} response for ${url}`)}catch(err){console.error(err)}}self.importScripts("./imports/client-zip/client-zip.js"),self.addEventListener("fetch",event=>{const url=new URL(event.request.url),[,name]=url.pathname.match(/\/downloadZip\/(.+)/i)||[,];url.origin===self.origin&&name&&event.respondWith(event.request.formData().then(data=>downloadZip(activate(data.getAll("url")))).catch(err=>new Response(err.message,{status:500})))});