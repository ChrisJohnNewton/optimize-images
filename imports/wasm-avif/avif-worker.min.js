self.importScripts("./wasm_avif.js");const defaultOptions={minQuantizer:1,maxQuantizer:2,minQuantizerAlpha:1,maxQuantizerAlpha:2,tileRowsLog2:1,tileColsLog2:2,speed:10},fetchImage=async()=>new Uint8Array(await fetch("https://chrisjohnnewton.github.io/images/chris-john-newton-raw.jpg").then(response=>response.arrayBuffer()));self.onmessage=e=>{Promise.all([fetchImage(),wasm_avif()]).then(([buffer,encoder])=>{console.log(`buffer length is: ${buffer.length}`),console.log(buffer);const encoded=encoder.encode(buffer,100,100,3,defaultOptions,3);encoder.free(),self.postMessage(new Uint8ClampedArray(encoded))})};