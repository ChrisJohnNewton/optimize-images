const wasm_avif=new Worker("/optimize-images/imports/wasm-avif/avif-worker.js"),execute=document.getElementById("execute");execute.addEventListener("click",()=>{console.log("Start avifModule"),wasm_avif.postMessage("Do work"),console.log("Ending avifModule")}),wasm_avif.onmessage=e=>{console.log(e.data);const blob=new Blob([e.data]);console.log(`blob is: ${blob.size}`);const newImage=new Image;newImage.width=100,newImage.height=100,newImage.src=URL.createObjectURL(blob),console.log(`newImage.src is: ${newImage.src}\n  newImage.width is: ${newImage.width}\n  newImage.height is: ${newImage.height}`),document.body.appendChild(newImage);let canvas=document.createElement("canvas"),canvasContext=canvas.getContext("2d");canvas.width=100,canvas.height=100,canvasContext.drawImage(newImage,0,0,100,100),document.body.appendChild(canvas);let canvasDataURL=canvas.toDataURL(blob),downloadLink=document.createElement("a");downloadLink.download="avifImage.avif",downloadLink.innerText="AVIF download.",downloadLink.href=canvasDataURL,downloadLink.dataset.downloadurl=`image/avif:${downloadLink.download}:${downloadLink.href}`,document.body.appendChild(downloadLink),downloadLink.click()};