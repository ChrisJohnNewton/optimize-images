const dropArea=document.getElementById("drop-area"),fileChooser=document.getElementById("file-chooser"),gallery=document.getElementById("gallery"),metaTitle=document.getElementById("meta-title"),metaAuthor=document.getElementById("meta-author"),metaCopyright=document.getElementById("meta-copyright"),imageWidths=document.querySelectorAll('input[name="image-widths"]'),fileTypes=document.querySelectorAll('input[name="file-types"]'),prepareImageButton=document.getElementById("prepare-image-button");function handlerFunction(){return!0}function uploadFile(file){let formData;(new FormData).append("image",file)}function previewFile(file){let reader=new FileReader;reader.readAsDataURL(file),reader.onloadend=function(){"none"===gallery.style.display&&gallery.style.removeProperty("display");let img=document.createElement("img");img.src=reader.result,img.id="web-image",img.className="br6 l2",img.dataset.fileName=file.name,gallery.children.length>0&&gallery.removeChild(gallery.firstChild),gallery.prepend(img)}}function prepareImage(){document.querySelectorAll("canvas").forEach(canvas=>document.body.removeChild(canvas));let img=document.getElementById("web-image"),imgName=document.getElementById("web-image").dataset.fileName,checkedImageWidths=new Array,checkedFileTypes=new Array;imageWidths.forEach(node=>{node.checked&&checkedImageWidths.push(+node.nextElementSibling.textContent.replace("px",""))}),fileTypes.forEach(node=>{node.checked&&checkedFileTypes.push(node.nextElementSibling.textContent)}),checkedImageWidths.forEach(width=>{let canvas=document.createElement("canvas"),height=img.height/(img.width/width),canvasContext=canvas.getContext("2d");canvas.width=width,canvas.height=height,canvasContext.drawImage(img,0,0,width,height);let canvasDataURL=canvas.toDataURL("image/png"),downloadLink=document.createElement("a");downloadLink.download=imgName,downloadLink.href=canvasDataURL,downloadLink.dataset.downloadurl=`image/png:${downloadLink.download}:${downloadLink.href}`,document.body.appendChild(downloadLink),downloadLink.click(),document.body.removeChild(downloadLink)})}dropArea.addEventListener("dragenter",handlerFunction,!1),dropArea.addEventListener("dragleave",handlerFunction,!1),dropArea.addEventListener("dragover",handlerFunction,!1),dropArea.addEventListener("drop",handlerFunction,!1),["dragenter","dragover","dragleave","drop"].forEach(eventName=>{dropArea.addEventListener(eventName,e=>{e.preventDefault(),e.stopPropagation()},!1)}),["dragenter","dragover"].forEach(eventName=>{dropArea.addEventListener(eventName,()=>dropArea.style.backgroundColor="#fff6e7",!1)}),["dragleave","drop"].forEach(eventName=>{dropArea.addEventListener(eventName,()=>dropArea.style.backgroundColor="#fff",!1)}),dropArea.addEventListener("drop",e=>{let file;previewFile(e.dataTransfer.files[0])},!1),fileChooser.addEventListener("change",e=>{let file;previewFile(e.currentTarget.files[0])},!1),prepareImageButton.addEventListener("click",()=>prepareImage());